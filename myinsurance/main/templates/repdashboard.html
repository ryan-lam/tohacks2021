<!DOCTYPE html>
<html>
    <head>
        <title>MyInsurance - Representative Dashboard</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
        <link href="../static/style.css" rel="stylesheet">

        <nav class="navbar navbar-light bg-white align-items-center container-fluid" style="height: 80px; top: 0;">
            <!-- Navbar content -->
            <a href="/" onclick="return false;" style="text-decoration: none; margin-left: 50px;"><h1 class="fw-bolder" style="color: #45D35D;">Appointments</h1></a>
            <div class="float-end me-5" style="position: relative;">
                <a style="text-decoration: none; margin-right: 10px;" href="/"><button class="btn topcustom" style="width: 100px; background-color: #45D35D; color: white;">Log Out</button></a> 
            </div>
        </nav>  
    </head>

    <body>
        <p style="font-size: 25px; margin-top: 10px; margin-left: 50px; text-decoration: underline; color: black;">Your client's appointments.</p>

        {% for appointment in appointmentdb %}
            <form class="node" style="position: relative;" action="{% url 'repdashboard' %}" method="POST">
                {% csrf_token %}
                <p style="font-size: 20px; margin-left: 40px; line-height: 25px; padding-top: 20px;" class="fw-bolder">Appointment Between:</p>
                <p style="font-size: 20px; margin-left: 40px; line-height: 25px;">{{ appointment.rep.name }} (You) and {{ appointment.client.name }} (Client)</p>
                <p style="font-size: 20px; margin-left: 40px; line-height: 25px;">Time: {{ appointment.time }}</p>
                <p style="font-size: 20px; margin-left: 40px; line-height: 25px;">Status: {{ appointment.status }}</p>
                <input type="text" value="{{ appointment.client.name }}" name="client_name" hidden>
                <input type="text" value="{{ appointment.rep.name }}" name="rep_name" hidden>
                <input type="text" value="{{ appointment.time }}" name="time" hidden>
                <div style="position: absolute; right: 30px; top: 20px; width: 100px;">
                    {% if appointment.status == "Accepted" %}
                    <button class="btn btn-danger" style="width: 100px;" value="Decline" type="submit" name="submit">Decline</button>
                    {% else %}
                    <button class="btn btn-success" style="width: 100px;" value="Accept" type="submit" name="submit">Accept</button>
                    <button class="btn btn-danger" style="margin-top: 10px; width: 100px;" value="Decline" type="submit" name="submit">Decline</button>
                    {% endif%}
                    
                </div>
                
            </form>

            


        {% empty %}
            <div class="no_appointment_node">
                <p style="font-display: 25px; text-align: center; padding-top: 30px;">No scheduled appointments.</p>
            </div>
        {% endfor %}
        
        

        

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
    </body>
</html>